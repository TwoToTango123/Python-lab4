# Лабораторная работа №4 — Вариант: «Казино и Гуси»

Репозиторий содержит реализацию учебной симуляции казино с пользовательскими коллекциями и псевдослучайной моделью.

Ключевые файлы:
- `src/casino.py` — основная реализация предметной модели и симуляции.
- `tests/test_lab4.py` — базовые unit-тесты и запуск короткой детерминированной симуляции.
- `src/main.py` — (не обязателен для этой работы) оставлен от предыдущих заданий.

Краткое описание предметной модели (в `src/casino.py`):
- `Player` — игрок с полем `balance` и методами `deposit/withdraw`.
- `Chip` — фишка казино с реализованным `__add__` (сложение фишек).
- `Goose` — базовый гусь; два подкласса:
	- `WarGoose` — атакует игрока и крадёт часть баланса;
	- `HonkGoose` — при вызове `honk` влияет на балансы игроков.
- Пользовательские коллекции:
	- `PlayerCollection`, `GooseCollection` — списковые коллекции с поддержкой итерации, `len`, индексации и срезов.
	- `CasinoBalance` — словарная коллекция `name -> amount` с логированием в `__setitem__` и методом `adjust_income`.
- `Casino` — класс, содержащий коллекции игроков/гусей/балансов и набор событий (ставка, выигрыш, атака гусём, кража, объединение гусей, паника и др.).
- `run_simulation(steps: int = 20, seed: int | None = None) -> None` — функция симуляции, детерминируемая по `seed`.

Требования, выполненные в реализации:
- Как минимум две пользовательские коллекции — списковая и словарная.
- Магический метод с предметным смыслом: `Chip.__add__`, `Goose.__add__` (объединение гусей), `CasinoBalance.__setitem__` (логирование).
- Симуляция использует `random` и при заданном `seed` воспроизводима.
- На каждом шаге выполняется одно случайное событие; логи выводятся в консоль.

Как запустить (PowerShell):
```powershell
python -m venv .venv; .venv\Scripts\Activate.ps1
python -m pip install -U pip; python -m pip install pytest
pytest -q
```

Пример запуска симуляции вручную:
```powershell
python -c "from src.casino import run_simulation; run_simulation(steps=10, seed=123)"
```

Пояснения для разработчика/оценщика:
- Логи событий печатаются в stdout — это основной артефакт симуляции.
- `CasinoBalance` аккумулирует доходы гусей и дома; изменение значений логируется (переопределён `__setitem__`).
- Тесты в `tests/test_lab4.py` проверяют базовое поведение коллекций, `Chip.__add__` и что `run_simulation` выполняется без ошибок при фиксированном `seed`.

Если нужно, могу:
- Расширить тесты для проверки влияния конкретных событий на балансы;
- Добавить CLI-обёртку для более гибных прогонов симуляции;
- Обновить `src/main.py` чтобы он вызывал `run_simulation` по умолчанию.

```